"use strict";(self.webpackChunkgulp2023=self.webpackChunkgulp2023||[]).push([[679],{2679:(t,s,e)=>{e.r(s),e.d(s,{default:()=>i});const i=class{constructor(t,s){this.canvas=document.querySelector(t),this.ctx=this.canvas.getContext("2d"),this.nodes=s,this.scale=1,this.offsetX=0,this.offsetY=0,this.nodeWidth=100,this.nodeHeight=50,this.init()}init(){this.canvas.addEventListener("wheel",this.onZoom.bind(this)),this.canvas.addEventListener("mousedown",this.onMouseDown.bind(this)),this.drawChart()}onZoom(t){t.preventDefault(),t.deltaY<0?this.scale=Math.min(this.scale+.1,2):this.scale=Math.max(this.scale-.1,.5),this.drawChart()}onMouseDown(t){const s=t.offsetX,e=t.offsetY,i=t=>{this.offsetX+=t.offsetX-s,this.offsetY+=t.offsetY-e,this.drawChart()},h=()=>{this.canvas.removeEventListener("mousemove",i),this.canvas.removeEventListener("mouseup",h)};this.canvas.addEventListener("mousemove",i),this.canvas.addEventListener("mouseup",h)}drawNode(t){const s=t.x*this.scale+this.offsetX,e=t.y*this.scale+this.offsetY;this.ctx.fillStyle="lightblue",this.ctx.fillRect(s,e,this.nodeWidth*this.scale,this.nodeHeight*this.scale),this.ctx.fillStyle="black",this.ctx.fillText(t.name,s+10,e+20),this.ctx.fillText(t.title,s+10,e+40)}drawChart(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.layoutNodes(),this.nodes.forEach((t=>this.drawNode(t)))}layoutNodes(){let t=100;this.nodes.forEach(((s,e)=>{if(null===s.pid)s.x=t,s.y=100,t+=this.nodeWidth+50;else{const t=this.nodes.find((t=>t.id===s.pid));s.x=t.x,s.y=t.y+this.nodeHeight+50}}))}addEmployee(t){this.nodes.push(t),this.drawChart()}}}}]);